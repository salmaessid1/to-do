<body style="background-image: url('assets/arriere.png'); background-size: cover; background-position: center; background-attachment: fixed;">
    <div class="todo-container">
        <h1>Task Manager</h1>
        
        <div class="filters">
            <button (click)="filter = 'all'" [class.active]="filter === 'all'">All</button>
            <button (click)="filter = 'active'" [class.active]="filter === 'active'">Active</button>
            <button (click)="filter = 'completed'" [class.active]="filter === 'completed'">Completed</button>
        </div>
    
        <div class="new-task">
            <input [(ngModel)]="newTask" placeholder="Add a new task..." />
            <input [(ngModel)]="newTaskNotes" placeholder="Add notes..." />
            <input type="date" [(ngModel)]="newTaskDueDate" placeholder="Due Date" />
            <button (click)="addTask()">Add Task</button>
        </div>
        
        <li *ngFor="let task of filterTasks()" [class.urgent]="task.isUrgent" [class.important]="task.important">
            <input type="checkbox" (change)="toggleComplete(task)" [checked]="task.completed" />
            <span [class.completed]="task.completed">
                <ng-container *ngIf="editingTask !== task; else editMode">
                    {{ task.name }} - <small>Date ajoutée : {{ task.addedTime | date:'short' }}</small>
                    <small *ngIf="task.dueDate"> | Échéance : {{ task.dueDate | date:'short' }}</small>
                </ng-container>
                <ng-template #editMode>
                    <input [(ngModel)]="editingTaskName" />
                </ng-template>
            </span>
            <div class="task-actions">
                <span>{{ task.title }}</span>
                <button class="important-btn" (click)="toggleImportant(task)">Important</button>
                <button class="urgent-btn" (click)="markAsUrgent(task)">Urgent</button>
                <button class="edit-btn" (click)="editTask(task)" *ngIf="editingTask !== task">Edit</button>
                <button class="save-btn" (click)="updateTask()" *ngIf="editingTask === task">Save</button>
                <button class="delete-btn" (click)="deleteTask(task)">Delete</button>
            </div>
            <div class="notes">Notes: {{ task.notes }}</div>
        </li>        
      </div>  
</body>
